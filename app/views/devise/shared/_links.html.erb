
<%# app/views/devise/shared/_links.html.erb %>
<% any_links = false %>

<nav aria-label="Auth options" class="mt-6">
  <div class="rounded-xl bg-[var(--surface)] ring-1 ring-[var(--border)] divide-y divide-[var(--border)] overflow-hidden">

    <% if controller_name != 'sessions' %>
      <% any_links = true %>
      <%= link_to new_session_path(resource_name),
                  class: "flex items-center justify-between px-4 py-3 hover:bg-[var(--surface-2)] group" do %>
        <span class="text-sm text-[var(--text)]">Log in</span>
        <span class="text-xs text-[var(--muted)] group-hover:text-[var(--text)]">→</span>
      <% end %>
    <% end %>

    <% if devise_mapping.registerable? && controller_name != 'registrations' %>
      <% any_links = true %>
      <%= link_to new_registration_path(resource_name),
                  class: "flex items-center justify-between px-4 py-3 hover:bg-[var(--surface-2)] group" do %>
        <span class="text-sm text-[var(--text)]">Sign up</span>
        <span class="text-xs text-[var(--muted)] group-hover:text-[var(--text)]">→</span>
      <% end %>
    <% end %>

    <% if devise_mapping.recoverable? && controller_name != 'passwords' && controller_name != 'registrations' %>
      <% any_links = true %>
      <%= link_to new_password_path(resource_name),
                  class: "flex items-center justify-between px-4 py-3 hover:bg-[var(--surface-2)] group" do %>
        <span class="text-sm text-[var(--text)]">Forgot your password?</span>
        <span class="text-xs text-[var(--muted)] group-hover:text-[var(--text)]">→</span>
      <% end %>
    <% end %>

    <% if devise_mapping.confirmable? && controller_name != 'confirmations' %>
      <% any_links = true %>
      <%= link_to new_confirmation_path(resource_name),
                  class: "flex items-center justify-between px-4 py-3 hover:bg-[var(--surface-2)] group" do %>
        <span class="text-sm text-[var(--text)]">Resend confirmation instructions</span>
        <span class="text-xs text-[var(--muted)] group-hover:text-[var(--text)]">→</span>
      <% end %>
    <% end %>

    <% if devise_mapping.lockable? && resource_class.unlock_strategy_enabled?(:email) && controller_name != 'unlocks' %>
      <% any_links = true %>
      <%= link_to new_unlock_path(resource_name),
                  class: "flex items-center justify-between px-4 py-3 hover:bg-[var(--surface-2)] group" do %>
        <span class="text-sm text-[var(--text)]">Resend unlock instructions</span>
        <span class="text-xs text-[var(--muted)] group-hover:text-[var(--text)]">→</span>
      <% end %>
    <% end %>
  </div>

  <%# OmniAuth providers as buttons %>
  <% if devise_mapping.omniauthable? && resource_class.omniauth_providers.any? %>
    <div class="mt-4 space-y-2">
      <% resource_class.omniauth_providers.each do |provider| %>
        <% label = "Sign in with #{OmniAuth::Utils.camelize(provider)}" %>
        <%= button_to omniauth_authorize_path(resource_name, provider),
                      data: { turbo: false },
                      class: "w-full inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium bg-[var(--btn-bg)] text-[var(--btn-text)] hover:bg-[var(--btn-hover-bg)] focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)]" do %>
          <%= label %>
        <% end %>
      <% end %>
    </div>
  <% end %>

  <%# Fallback if nothing to show %>
  <% unless any_links || (devise_mapping.omniauthable? && resource_class.omniauth_providers.any?) %>
    <p class="mt-4 text-center text-sm text-[var(--muted)]">No additional actions available.</p>
  <% end %>
</nav>
