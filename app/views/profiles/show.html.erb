<div class="min-h-screen bg-[var(--bg)] text-[var(--text)]">
  <div class="max-w-6xl mx-auto px-6 pt-14 pb-16">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
      <!-- LEFT: Sidebar -->
      <aside class="lg:col-span-4 space-y-6 lg:sticky lg:top-8 self-start">
        <% cache [@user, "public_profile_header_v5"] do %>
          <%= render PublicProfile::HeaderComponent.new(user: @user) %>
        <% end %>

        <% cache ["public_profile_links", @user.id, @links.cache_key_with_version] do %>
          <%= render PublicProfile::LinksSectionComponent.new(user: @user, links: @links) %>
        <% end %>
      </aside>
      <!-- RIGHT: Experience + Posts -->
      <main class="lg:col-span-8 space-y-8">
        <% cache ["public_profile_experiences", @user.id, @experiences.cache_key_with_version] do %>
          <%= render PublicProfile::ExperienceSectionComponent.new(experiences: @experiences) %>
        <% end %>

        <% cache ["public_profile_latest_posts", @user.id, @pagy.page, @posts.cache_key_with_version] do %>
          <%= render PublicProfile::LatestPostsSectionComponent.new(
            user: @user,
            posts: @posts,
            pagy: @pagy,
          ) %>
        <% end %>
      </main>
    </div>
  </div>
</div>
